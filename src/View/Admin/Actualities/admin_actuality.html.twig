{% extends 'layoutAdmin.html.twig' %}

{% block stylesheet %}
	<link rel="stylesheet" href="/assets/css/actuality.css">
{% endblock %}

{% block title %}Liste des Actualités
{% endblock %}

{% block content %}

	<div class="actu-container container mt-5">
		<div class="row d-flex justify-content-center">
			<div class="col-10">
				<h1 class="actu-title text-center fs-1 mt-5 text-danger">{{ "administration - actualités"|upper }}</h1>

				<div class="text-end">
					<a href="/admin/actualites/ajouter" class="actu-btn btn btn-danger align-self-right">Ajouter</a>
				</div>

				<table class="table table-striped table-hover justify-content-between">
					<thead>
						<tr>
							<th scope="col" class="col-md-4">Titre de l'actualité</th>
							{% if message == 'success' %}
								<div class="alert alert-success text-center" role="alert">Opération réalisée avec succès.</div>
							{% endif %}
							<th scope="col" class="col-md-4">Contenu</th>
						</tr>
					</thead>
					<tbody>
						{% for actuality in actualities %}
							<tr>
								<td class="col-md-3">{{ actuality.title }}</td>
								<td class="col-md-6">{{ actuality.content }}</td>
								<td>
									<a href="/admin/actualites/editer?id={{ actuality.id }}" class="btn btn-outline-warning btn-sm">Modifier
									</a>
								</td>
								<td>
									<button type="button" class="actu-btn btn btn-outline-danger btn-sm" data-bs-toggle="modal" data-bs-target="#Modal{{actuality.id}}">Supprimer</button>

									<div class="modal fade" tabindex="-1" id="Modal{{actuality.id}}">
										<div class="modal-dialog">
											<div class="modal-content">
												<div class="modal-header">
													<h5 class="modal-title">Avertissement</h5>
													<button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
												</div>
												<div class="modal-body">
													<p>Veuillez confirmer la suppression de
														{{actuality.title}}</p>
												</div>
												<div class="modal-footer">
													<button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Annuler</button>
													<form action="/admin/actualites/supprimer" method="post">
														<input type="hidden" name="id" value="{{ actuality.id }}">
														<button class="btn btn-outline-danger btn-sm" method="post">Supprimer</button>
													</td>
												</tr>
											{% endfor %}
										</tbody>
									</table>
								</td>
							</tr>
						</div>
					</tbody>
				</div>
			</div>
		</div>
	{% endblock %}
	{% block javascript %}{% endblock %}
